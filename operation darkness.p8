pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--game manager--

function _init()
	g_mask={7,8,9,18,23,24,40,41,
	56,57}
	
	player_init()
	wires_init()
end


function _update()
		--player--
	player_movement()
	player_construction()
end
	

function _draw()
	cls()
	
	palt(14,true)
	palt(0,false)
	map()
	palt()
	
	wires_draw()
	player_draw()
	
	print(mget(flr(player.x/8),
	flr(player.y/8)))
end
-->8
--player code--

function player_init()
	player={
	x=64,
	y=64,
	sprite=0,
	last_time=time()
	}
end


function player_movement()
	local timer=time()-player.last_time

	if timer>=0.14 then
	 -- x-movement --
		if btn(➡️) then
			player.x+=8
			player.last_time=time()
		end
		if btn(⬅️) then
			player.x-=8
			player.last_time=time()
		end
		-- y-movement --
		if btn(⬆️) then
			player.y-=8
			player.last_time=time()
		end
		if btn(⬇️) then
			player.y+=8
			player.last_time=time()
		end
	end
end


function player_tile()
	return mget(flr(player.x/8),flr(player.y/8))
end


function player_draw()
	player_change_sprite()
	palt(14,true)
	palt(0,false)
	spr(player.sprite,
	player.x,player.y)
	palt()
end


function player_construction()
		local timer=time()-player.last_time
		
		if is_in_list(player_tile(),g_mask) then
		 if btn(❎) and timer>=0.25 then
		 	sfx(01)
		 	add(wires,{x=player.x,y=player.y,sprite=24})
		 	player.last_time=time()
		 else
		 	print("hi")
		 end
		end
end


function player_change_sprite()
	if player_tile()==18 then
		player.sprite=16
	else
		player.sprite=0
	end
end
-->8
--math functions--

function is_in_list(num, list)
 for i = 1, #list do
  if list[i] == num then
   return true
  end
 end
 return false
end
-->8
--interface--
-->8
--camera--
-->8
--wires--

function wires_init()
	wires={}
end


function wires_draw()
	for wire in all(wires) do
		palt(0,false)
		spr(wire.sprite,wire.x,wire.y)
		palt()
	end
end
__gfx__
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000777777777777777777700777000000000000000000000000000000000000000000000000
e77ee77eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000700007777770077777700777000000000000000000000000000000000000000000000000
e7eeee7eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000707707777777777777777777000000000000000000000000000000000000000000000000
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000707700077070070777700777000000000000000000000000000000000000000000000000
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000707707077070070777700777000000000000000000000000000000000000000000000000
e7eeee7eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000707707077777777777777777000000000000000000000000000000000000000000000000
e77ee77eeeeeee777777777777eeeeeeeeeeee7777eeeeee00000000707707077770077777700777000000000000000000000000000000000000000000000000
eeeeeeeeeeeeee700000000007eeeeeeeeeeee7007eeeeee00000000777777777777777777700777000000000000000000000000000000000000000000000000
77777777eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000777777777777777700000000000000000000000000000000000000000000000000000000
70077007eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000700077777777777700000000000000000000000000000000000000000000000000000000
70777707eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000707077777777777700000000000000000000000000000000000000000000000000000000
77777777eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000707000070070070000000000000000000000000000000000000000000000000000000000
77777777eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000707777070070070000000000000000000000000000000000000000000000000000000000
70777707eeeeee707777777707eeeeeeeeeeee7007eeeeee00000000707777077777777700000000000000000000000000000000000000000000000000000000
70077007eeeeee707777777707eeeeee777777700777777700000000700000077777777700000000000000000000000000000000000000000000000000000000
77777777eeeeee707777777707eeeeee000000000000000000000000777777777777777700000000000000000000000000000000000000000000000000000000
00000000eeeeee700000000007eeeeee000000000000000000000000000000007770077777700777000000000000000000000000000000000000000000000000
00000000eeeeee777777777777eeeeee777777700777777700000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000eeeeee777777777777eeeeee777777700777777700000000000000007770077777700777000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeee7007eeeeee00000000000000000700077777700070000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeee7007eeeeee00000000000000000700077777700070000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeee7007eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeee7007eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeee7007eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeee7007eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeee7777eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeee7777eeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeeeeeeeeeeeee00000000000000000700077777700070000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeeeeeeeeeeeee00000000000000000700077777700070000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeeeeeeeeeeeee00000000000000007770077777700777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeeeeeeeeeeeee00000000000000007777777777777777000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeeeeeeeeeeeeeee00000000000000007770077777700777000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000010203000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000111213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001020202141213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011121212121213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011122522222223000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011121300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000021222300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100001d150131500e1500a15008150061500515004150031500510009100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000260501c05016050120500f0500c0500b0500a050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
